<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
<title>Píseň</title>
<link rel="stylesheet" href="/zpjevnicek/assets/style.css" />
<link rel="manifest" href="/zpjevnicek/manifest.webmanifest" />
<meta name="theme-color" content="#0f1729" />
<link rel="apple-touch-icon" href="/zpjevnicek/assets/icons/icon-192.png" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="Zpjěvníček" />


<script defer src="https://unpkg.com/@coderline/alphatab@latest/dist/alphaTab.min.js"></script>
<style>
:root{
--cpfs: calc(20px * var(--song-scale, 1));
--chromeH:0px;
--chordColor:#22c55e;
--chordScale:1.05;

/* ↓↓↓ nové „knoflíky“ pro svislé mezery */
--cp-line:1.25;        /* bylo 1.9 – celkové řádkování textu */
--cp-pad:1.05em;       /* bylo 1.15em – výška pro akord nad textem */
--cp-pad-nochords:0.20em;
/* vlastní okraje „plátna“ písně + šířka posuvníku */
--song-pad-top: 12px;
--song-pad-bottom: 24px;
--song-pad-x: 8px;     /* ← tady budeš měnit levý/pravý „vnitřní“ okraj textu */
--scrollbarW: 3px;     /* ~1/6 běžné šířky (cca 18px → 3px) */

}

/* ChordPro render */
.cp{
font-family:system-ui,Segoe UI,Arial,sans-serif;
color:var(--ink);
font-size:var(--cpfs);
line-height:var(--cp-line);  /* ← používáme proměnnou */
}
.cp .line{
position:relative;
white-space:pre-wrap;
overflow: visible;   /* ← přidej sem */
}

.cp .seg{ position:relative; display:inline-block; padding-top:var(--cp-pad) }
/* ← menší rezerva */
.cp .ch{
position:absolute; left:0; top:0;
font-weight:700;
font-family:ui-monospace,SFMono-Regular,Menlo,monospace;
font-size:calc(1em * var(--chordScale));
color:var(--chordColor);
}
.cp .ly{ visibility:visible }

/* režim bez akordů – ještě těsnější */
.cp.nochords .ch{ display:none }
.cp.nochords .seg{ padding-top:var(--cp-pad-nochords) }
/* lámej jen na mezerách, ne uprostřed slov */
/* dělení pouze mezi slovy, ne uvnitř slov – zachová výšku akordů */
.cp .line{
white-space: normal;        /* dovolí zalomení */
word-break: keep-all;       /* neláme uvnitř slov */
overflow-wrap: normal;
}
.cp .ly{
display: inline-block;      /* každé slovo může jít na nový řádek */
white-space: pre-wrap;      /* zachová mezery v textu */
}

    
.cp, .cp .line, .cp .seg, .cp .ly{
  word-break: normal;
  overflow-wrap: normal;  /* žádné „anywhere“ nebo „break-word“ */
  hyphens: none;          /* vypnout automatickou hyfenaci */
}
/* „plátno“ -> bez rámečku/pozadí (žádná bublina) */
.sheet{ padding:0; background:transparent; border:none; box-shadow:none; }

/* horní lišta – fixní, aby neměnila výšku stránky */
#chrome{
position:fixed;           /* ⬅ bylo sticky */
top:0; left:0; right:0;   /* přes celou šířku */
z-index:5;
background:var(--card);
padding:12px 12px 8px;
border-bottom:1px solid #192544;
transition: transform .2s ease, opacity .2s ease;
}

/* když je lišta skrytá, jen ji odsuneme, ale layout se nemění */
body.chrome-hidden #chrome{
transform: translateY(-110%);
opacity: 0;
}

/* obsah stránky dostane horní padding = výška lišty (jen když je viditelná) */
body:not(.chrome-hidden) #view{
padding-top: var(--chromeH);   /* výšku doplní JS */
}


/* řádek s odkazem a tlačítkem v liště */
.chrome-row{
display:flex; justify-content:space-between; align-items:center; gap:8px;
}
button.ghost{
background:transparent; border:1px solid #2c3b60; border-radius:8px;
padding:4px 8px; color:var(--ink); cursor:pointer;
}
button.ghost:hover{ background:#17213a; }

/* skrytá lišta: nesmí zabírat místo */
body.chrome-hidden #chrome{
transform: translateY(-110%);
opacity: 0;
height: 0;
padding: 0;
margin: 0;
border: 0;
overflow: hidden;
}

/* obsah: plná výška viewportu; lištu řešíme jen paddingem */
#view{
height: 100vh;
max-height: 100vh;
overflow:auto;
background:transparent;
border:0; border-radius:0; box-shadow:none;
/* pravý vnitřní okraj 0 → scrollbar na úplný kraj obrazovky */
padding: var(--song-pad-top) 0 var(--song-pad-bottom) var(--song-pad-x);
/* tenký scrollbar (Firefox) */
scrollbar-width: thin;
scrollbar-color: #2c3b60 transparent;
}

/* WebKit scrollbar: tenký a úplně u pravého okraje */
#view::-webkit-scrollbar{
width: var(--scrollbarW);
}
#view::-webkit-scrollbar-track{
background: transparent;
}
#view::-webkit-scrollbar-thumb{
background: #2c3b60;
border-radius: 2px;
}

/* když je lišta vidět, přičti její výšku navrch – nic neodečítáme z height */
body:not(.chrome-hidden) #view{
padding-top: calc(var(--chromeH) + 12px);
}

@media (max-width:640px){ #view{ padding-left:2px; padding-right:2px } }

.auto-scroll{
position:fixed; right:16px; bottom:16px;
width:56px; height:56px; border-radius:999px;
background:transparent;
border:2px solid #2c3b60;
color:var(--ink);
font-size:28px; line-height:1;
display:flex; align-items:center; justify-content:center;
z-index:10;
opacity:.9; 
cursor:pointer;
}
.auto-scroll:hover{ opacity:1 }
.auto-scroll:active{ transform:scale(.98) }
.auto-scroll.hidden{ display:none }
/* Jen pro song.html: žádné odsazení kontejneru vpravo */
.container{ padding-right: 0 !important; }

</style>
</head>
<body>
<div class="container">
<div class="sheet" style="margin-top:12px">
<div id="chrome">
<div class="chrome-row">
<a id="backLink" href="index.html">← Zpět na seznam</a>
<button id="toggleChrome" class="ghost" title="Skrýt / zobrazit lištu">▾</button>
</div>

<h2 id="title" style="margin:8px 0">Načítám…</h2>
<div class="badge" id="meta"></div>

<!-- Ovládání pro noty (alphaTab) -->
<div id="controls-score" class="player" style="display:none">
<button id="play">Přehrát</button>
<button id="stop">Stop</button>
<label>Tempo <input id="tempo" type="range" min="30" max="200" value="100"></label>
</div>

<!-- Ovládání pro ChordPro -->
<div id="controls-cp" class="player" style="display:none">
<!-- <span class="kbd">ChordPro</span> -->

<span class="kbd">Transponovat:
<button id="down" type="button">−</button>
<button id="up"   type="button">+</button>
</span>

<span class="kbd">Rolování:
